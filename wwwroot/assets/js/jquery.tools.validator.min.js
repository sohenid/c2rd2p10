/**
 * @license 
 * jQuery Tools Validator @VERSION - HTML5 is here. Now use it.
 * 
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 * 
 * http://flowplayer.org/tools/form/validator/
 * 
 * Since: Mar 2010
 * Date: @DATE 
 */
/*jslint evil: true */ 
/* http://jscompress.com/ */
(function(e){function t(t,n,i){function s(t,n,r){if(!i.grouped&&t.length){return}var s;if(r===false||e.isArray(r)){s=f.messages[n.key||n]||f.messages["*"];s=s[i.lang]||f.messages["*"].en;var o=s.match(/\$\d/g);if(o&&e.isArray(r)){e.each(o,function(e){s=s.replace(this,r[e])})}}else{s=r[i.lang]||r}t.push(s)}var u=this,a=n.add(u);t=t.not(":button, :image, :reset, :submit");n.attr("novalidate","novalidate");e.extend(u,{getConf:function(){return i},getForm:function(){return n},getInputs:function(){return t},reflow:function(){t.each(function(){var t=e(this),n=t.data("msg.el");if(n){var s=r(t,n,i);n.css({top:s.top,left:s.left})}});return u},invalidate:function(n,r){if(!r){var s=[];e.each(n,function(e,n){var r=t.filter("[name='"+e+"']");if(r.length){r.trigger("OI",[n]);s.push({input:r,messages:[n]})}});n=s;r=e.Event()}r.type="onFail";a.trigger(r,[n]);if(!r.isDefaultPrevented()){c[i.effect][0].call(u,n,r)}return u},reset:function(n){n=n||t;n.removeClass(i.errorClass).each(function(){var t=e(this).data("msg.el");if(t){t.remove();e(this).data("msg.el",null)}}).unbind(i.errorInputEvent+".v"||"");return u},destroy:function(){n.unbind(i.formEvent+".V").unbind("reset.V");t.unbind(i.inputEvent+".V").unbind("change.V");return u.reset()},checkValidity:function(n,r){n=n||t;n=n.not(":disabled");var f={};n=n.filter(function(){var t=e(this).attr("name");if(!f[t]){f[t]=true;return e(this)}});if(!n.length){return true}r=r||e.Event();r.type="onBeforeValidate";a.trigger(r,[n]);if(r.isDefaultPrevented()){return r.result}var h=[];n.each(function(){var t=[],n=e(this).data("messages",t),f=o&&n.is(":date")?"onHide.v":i.errorInputEvent+".v";n.unbind(f);e.each(l,function(){var e=this,o=e[0];if(n.filter(o).length){var f=e[1].call(u,n,n.val());if(f!==true){r.type="onBeforeFail";a.trigger(r,[n,o]);if(r.isDefaultPrevented()){return false}var l=n.attr(i.messageAttr);if(l){t=[l];return false}else{s(t,o,f)}}}});if(t.length){h.push({input:n,messages:t});n.trigger("OI",[t]);if(i.errorInputEvent){n.bind(f,function(e){u.checkValidity(n,e)})}}if(i.singleError&&h.length){return false}});var p=c[i.effect];if(!p){throw'Validator: cannot find effect "'+i.effect+'"'}if(h.length){u.invalidate(h,r);return false}else{r.type="onSuccess";a.trigger(r,[n]);n.unbind(i.errorInputEvent+".v")}return true}});e.each("onBeforeValidate,onBeforeFail,onFail,onSuccess".split(","),function(t,n){if(e.isFunction(i[n])){e(u).bind(n,i[n])}u[n]=function(t){if(t){e(u).bind(n,t)}return u}});if(i.formEvent){n.bind(i.formEvent+".V",function(e){if(!u.checkValidity(null,e)){return e.preventDefault()}e.target=n;e.type=i.formEvent})}n.bind("reset.V",function(){u.reset()});if(t[0]&&t[0].validity){t.each(function(){this.oninvalid=function(){return false}})}if(n[0]){n[0].checkValidity=u.checkValidity}if(i.inputEvent){t.bind(i.inputEvent+".V",function(t){u.checkValidity(e(this),t)})}t.filter(":checkbox, select").filter("[required]").bind("change.V",function(t){var n=e(this);if(this.checked||n.is("select")&&e(this).val()){}});t.filter(":radio[required]").bind("change.V",function(t){var n=e("[name='"+e(t.srcElement).attr("name")+"']");if(n!=null&&n.length!=0){u.checkValidity(n,t)}});e(window).resize(function(){u.reflow()})}function n(e){function t(){return this.getAttribute("type")==e}t.key="[type="+e+"]";return t}function r(t,n,r){n=e(n).first()||n;var i=t.offset().top,s=t.offset().left,o=r.position.split(/,?\s+/),u=o[0],a=o[1];i-=n.outerHeight()-r.offset[0];s+=t.outerWidth()+r.offset[1];if(/iPad/i.test(navigator.userAgent)){i-=e(window).scrollTop()}var f=n.outerHeight()+t.outerHeight();if(u=="center"){i+=f/2}if(u=="bottom"){i+=f}var l=t.outerWidth();if(a=="center"){s-=(l+n.outerWidth())/2}if(a=="left"){s-=l}return{top:i,left:s}}e.tools=e.tools||{version:"@VERSION"};var i=/\[type=([a-z]+)\]/,s=/^-?[0-9]*(\.[0-9]+)?$/,o=e.tools.dateinput,u=/^([a-z0-9_\.\-\+]+)@([\da-z\.\-]+)\.([a-z\.]{2,6})$/i,a=/^(https?:\/\/)?[\da-z\.\-]+\.[a-z\.]{2,6}[#&+_\?\/\w \.\-=]*$/i,f;f=e.tools.validator={conf:{grouped:false,effect:"default",errorClass:"invalid",inputEvent:null,errorInputEvent:"keyup",formEvent:"submit",lang:"en",message:"<div/>",messageAttr:"data-message",messageClass:"error",offset:[0,0],position:"center right",singleError:false,speed:"normal"},messages:{"*":{en:"Please correct this value"}},localize:function(t,n){e.each(n,function(e,n){f.messages[e]=f.messages[e]||{};f.messages[e][t]=n})},localizeFn:function(t,n){f.messages[t]=f.messages[t]||{};e.extend(f.messages[t],n)},fn:function(t,r,s){if(e.isFunction(r)){s=r}else{if(typeof r=="string"){r={en:r}}this.messages[t.key||t]=r}var o=i.exec(t);if(o){t=n(o[1])}l.push([t,s])},addEffect:function(e,t,n){c[e]=[t,n]}};var l=[],c={"default":[function(t){var n=this.getConf();e.each(t,function(t,i){var s=i.input;s.addClass(n.errorClass);var o=s.data("msg.el");if(!o){o=e(n.message).addClass(n.messageClass).appendTo(document.body);s.data("msg.el",o)}o.css({visibility:"hidden"}).find("p").remove();e.each(i.messages,function(t,n){e("<p/>").html(n).appendTo(o)});if(o.outerWidth()==o.parent().width()){o.add(o.find("p")).css({display:"inline"})}var u=r(s,o,n);o.css({visibility:"visible",position:"absolute",top:u.top,left:u.left}).fadeIn(n.speed)})},function(t){var n=this.getConf();t.removeClass(n.errorClass).each(function(){var t=e(this).data("msg.el");if(t){t.css({visibility:"hidden"})}})}]};e.each("email,url,number".split(","),function(t,n){e.expr[":"][n]=function(e){return e.getAttribute("type")===n}});e.fn.oninvalid=function(e){return this[e?"bind":"trigger"]("OI",e)};f.fn(":email","Please enter a valid email address",function(e,t){return!t||u.test(t)});f.fn(":url","Please enter a valid URL",function(e,t){return!t||a.test(t)});f.fn(":number","Please enter a numeric value.",function(e,t){return s.test(t)});f.fn("[max]","Please enter a value no larger than $1",function(e,t){if(t===""||o&&e.is(":date")){return true}var n=e.attr("max");return parseFloat(t)<=parseFloat(n)?true:[n]});f.fn("[min]","Please enter a value of at least $1",function(e,t){if(t===""||o&&e.is(":date")){return true}var n=e.attr("min");return parseFloat(t)>=parseFloat(n)?true:[n]});f.fn("[required]","Please complete this mandatory field.",function(e,t){if(e.is(":checkbox")){return e.is(":checked")}return!!t});f.fn("[pattern]",function(e,t){return t===""||(new RegExp("^"+e.attr("pattern")+"$")).test(t)});f.fn(":radio","Please select an option.",function(t){var n=false;var r=e("[name='"+t.attr("name")+"']").each(function(t,r){if(e(r).is(":checked")){n=true}});return n?true:false});e.fn.validator=function(n){var r=this.data("validator");if(r){r.destroy();this.removeData("validator")}n=e.extend(true,{},f.conf,n);if(this.is("form")){return this.each(function(){var i=e(this);r=new t(i.find(":input"),i,n);i.data("validator",r)})}else{r=new t(this,this.eq(0).closest("form"),n);return this.data("validator",r)}}})(jQuery);